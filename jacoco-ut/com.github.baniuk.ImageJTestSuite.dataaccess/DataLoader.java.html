<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>DataLoader.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ImageJTestSuite</a> &gt; <a href="index.source.html" class="el_package">com.github.baniuk.ImageJTestSuite.dataaccess</a> &gt; <span class="el_source">DataLoader.java</span></div><h1>DataLoader.java</h1><pre class="source lang-java linenums">package com.github.baniuk.ImageJTestSuite.dataaccess;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.ListIterator;
import java.util.Locale;
import java.util.Scanner;

import org.scijava.vecmath.Point2d;
import org.slf4j.LoggerFactory;

import com.github.baniuk.ImageJTestSuite.ConvertLists;

import ij.process.FloatPolygon;

/**
 * Minimalistic test data loader.
 * 
 * &lt;p&gt;Load list of points saved as one-column list with interleaving coordinates of vertices:
 * 
 * &lt;pre&gt;
 * x1
 * y1
 * x2
 * y2
 * ...
 * ...
 * xn
 * yn
 * &lt;/pre&gt;
 * 
 * &lt;p&gt;The file must contain even number of data. Exemplary code in Matlab to create such file:
 * TODO add example
 * 
 * @author p.baniukiewicz
 *
 */
public class DataLoader {

  /**
   * The Constant LOGGER.
   * 
   * &lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/14544991/how-to-configure-slf4j-simple&quot;&gt;Set
   * level&lt;/a&gt;
   */
<span class="nc" id="L48">  static final org.slf4j.Logger LOGGER = LoggerFactory.getLogger(DataLoader.class.getName());</span>
  private List&lt;Double&gt; data;
  /**
   * Data loaded on constructor call.
   */
  public List&lt;Point2d&gt; vert;

  /**
   * Construct dataLoader object.
   * 
   * &lt;p&gt;Open and read datafile
   * 
   * @param fileName file with data (with path)
   * @throws FileNotFoundException on bad file
   * @throws IllegalArgumentException when the number of lines in \c fileName is not power of 2
   */
<span class="nc" id="L64">  public DataLoader(String fileName) throws FileNotFoundException, IllegalArgumentException {</span>
<span class="nc" id="L65">    data = new ArrayList&lt;Double&gt;();</span>
<span class="nc" id="L66">    vert = new ArrayList&lt;Point2d&gt;();</span>
<span class="nc" id="L67">    Scanner scanner = new Scanner(new File(fileName));</span>
<span class="nc" id="L68">    scanner.useLocale(Locale.US);</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">    while (scanner.hasNextDouble()) {</span>
<span class="nc" id="L70">      data.add(scanner.nextDouble());</span>
    }
<span class="nc" id="L72">    scanner.close();</span>
<span class="nc" id="L73">    convertToPoint2d();</span>
<span class="nc" id="L74">    LOGGER.debug(&quot;File: &quot; + fileName + &quot; loaded&quot;);</span>
<span class="nc" id="L75">  }</span>

  /**
   * Convert read List/&lt;Double/&gt; to List/&lt;Point2d/&gt;.
   * 
   * @throws IllegalArgumentException on wrong number of data in file
   */
  private void convertToPoint2d() throws IllegalArgumentException {
<span class="nc bnc" id="L83" title="All 2 branches missed.">    if (data.size() % 2 != 0) {</span>
<span class="nc" id="L84">      throw new IllegalArgumentException(&quot;Data must be multiply of 2&quot;);</span>
    }
<span class="nc" id="L86">    ListIterator&lt;Double&gt; it = data.listIterator();</span>
<span class="nc bnc" id="L87" title="All 2 branches missed.">    while (it.hasNext()) {</span>
<span class="nc" id="L88">      vert.add(new Point2d(it.next().doubleValue(), // x coord</span>
<span class="nc" id="L89">              it.next().doubleValue())); // y coord from input file</span>
    }
<span class="nc" id="L91">  }</span>

  /**
   * Return loaded data.
   * 
   * @return loaded polygon as List/&lt;Point2d/&gt;
   */
  public List&lt;Point2d&gt; getListofPoints() {
<span class="nc" id="L99">    return vert;</span>
  }

  /**
   * Return loaded data as FloatPolygon.
   * 
   * @return Loaded polygon as FloatPolygon
   */
  public FloatPolygon getFloatPolygon() {
<span class="nc" id="L108">    return ConvertLists.fromList2Polygon(getListofPoints());</span>
  }

  /**
   * Convert loaded data to string.
   * 
   * @return String representation of loaded data
   */
  public String toString() {
<span class="nc" id="L117">    return vert.toString();</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>